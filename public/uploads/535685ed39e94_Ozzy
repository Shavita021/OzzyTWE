533867e4e2763

alicia abrego morales
bancomer
012580
001412330419

@if(Session::get('autorizacion') != 'si') 
{{	header("Location: /");
	exit();
	}}
@else
@if(Session::get('tipoSession') == 'adminMaestro' OR Session::get('tipoSession') == 'adminSecundario') 

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>ITESM WorkFlow Engine</title>

         <link href="/css/bootstrap.css" rel="stylesheet">
         <link href="/css/sb-admin.css" rel="stylesheet">
         <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
         
  </head>

  <body>

    <div id="wrapper">

      <!-- Sidebar -->
      <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">

            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/inicio"><strong>WorkFlow Engine</strong></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav side-nav">
            <li><a href="/inicio"><i class="glyphicon glyphicon-home"></i> Inicio</a></li>
            <li><a href="/usuarios"><i class="glyphicon glyphicon-user"></i> Administracion Usuarios</a></li>
            <li><a href="/administracionRoles"><i class="glyphicon glyphicon-registration-mark"></i> Administracion Roles</a></li>
            <li class="active"><a href="/procesos"><i class="glyphicon glyphicon-random"></i>  Procesos</a></li>     
          </ul>

          <ul class="nav navbar-nav navbar-right navbar-user">
            <li class="dropdown messages-dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="glyphicon glyphicon-flag"></i> Notificaciones <span class="badge">7</span> <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header">7 Mensajes Nuevos</li>
                <li class="message-preview">
                  <a href="#">
                    <span class="avatar"><img src="http://placehold.it/50x50"></span>
                    <span class="name">John Smith:</span>
                    <span class="message">Hey there, I wanted to ask you something...</span>
                    <span class="time"><i class="fa fa-clock-o"></i> 4:34 PM</span>
                  </a>
                </li>
                <li class="divider"></li>
                <li><a href="#">View Inbox <span class="badge">7</span></a></li>
              </ul>
            </li>
            <li class="dropdown alerts-dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="glyphicon glyphicon-bell"></i> Alertas <span class="badge">3</span> <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">View All</a></li>
              </ul>
            </li>
            <li class="dropdown user-dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="glyphicon glyphicon-user"></i> {{ Session::get('sesionUsuario') }} <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/logout"><i class="glyphicon glyphicon-off"></i> Salir</a></li>
              </ul>
            </li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </nav>
      
      
          <div style="margin-left:30px">
                 <br>
                 <table width="100%">
                 <tbody>
                    <tr>
                    <td>
                         <h3>Crear Proceso</h3>
                    </td>
                    <td name="ddiv" align="center">
                         @if (Session::has('errorCrearRol'))
                         <div class="alert alert-danger"  style="width:300px;">{{ Session::get('errorCrearRol') }}</div>
                         @endif
                    </td>
                    </tr>  
                 </tbody>
              </table> 
                    <br>
                    <table align="center">
	                 <tbody>
	                 <tr>                    
               {{ Form::open(array('action' => 'procesoController@store')) }}
                      <td style="padding:15px">
		               {{ Form::label('nombre', 'Nombre del Proceso:') }}
		            </td>
		            <td style="padding:15px">
		               {{ Form::text('nombre', Input::old('nombre'), array('class' => 'form-control')) }}
		            <td><i name="ddiv" style="color:#7080CD">{{ $errors->first('nombre') }}</i></td>
		            </td>
		            </tr>
	                 <tr>
	                 <td style="padding:15px">
		               {{ Form::label('descripcion', 'Descripcion:') }}
		            </td>
		            <td style="padding:15px">
		               {{ Form::textarea('descripcion', Input::old('descripcion'), array('class' => 'form-control', 'style' => 'height:100px')) }}
		            <td><i name="ddiv" style="color:#7080CD">{{ $errors->first('descripcion') }}</i></td>
		            </td>
		            </tr>
		            <tr>
		            </tr>
                      </tbody>
                      </table>
                             
                           
                           <h4 align="center">Tarea 1</h4>
                           <div class="jumbotron" align="center" style="width:80%;height:475px;display:block; margin-left: auto;margin-right: auto;background-color:#B1B1B1">
		                    <table align="left">
		                         <tbody>
		                              <tr>
		                                   <td style="padding:15px">
		                                   {{ Form::label('descripcionTarea', 'Descripcion del Paso:') }}
		                                   </td>
		                                   <td style="padding:15px">
		               {{ Form::textarea('descripcionTarea', Input::old('descripcion'), array('class' => 'form-control', 'style' => 'height:100px')) }}		                                   
		                                   </td>	                                  
		                              </tr>
		                         </tbody>
		                    </table>
		                    <table align="left">
		                         <tbody>
		                              <tr>
		                                   <td style="padding:15px">
       	                                   {{ Form::label('responsableTarea', 'Asignado a:') }}
		                                   </td>
		                                   <td td style="padding:15px">
               <div style="width:240px; height: 100px; overflow-y: scroll;">
               @foreach($roles as $key => $value)	                                       
               <input type="radio" name="rol" value="{{ $value->id }}" onClick="getUsuarios()"> {{ $value->nombre }}<br>
               @endforeach
               </div>		                                   
		                                   </td>
		                                   <td td style="padding:15px">
		     <div id="usuarios" style="width:240px; height: 100px; overflow-y: scroll;">   

		     </div>
		                                   </td>
		                              </tr>
		                        </tbody>
		                     </table>
		                     <table align="left">
		                         </tbody>
		                              <tr>	
		                                   <td style="padding:15px">
		                                   {{ Form::label('fechaLimite', 'Fecha limite:') }}
                                             
                                    <input type="text" id="datepicker" name="fechaLimite"></input>
                                             
                                             </td>
                                             <td style="padding:15px">
                                             {{ Form::label('horaLimite', 'Hora limite:') }}
                                         
                                             <select name="horaLimite">
                                             <option value="00">00:00</option>
                                             <option value="01">01:00</option>
                                             <option value="02">02:00</option>
                                             <option value="03">03:00</option>
                                             <option value="04">04:00</option>
                                             <option value="05">05:00</option>
                                             <option value="06">06:00</option>
                                             <option value="07">07:00</option> 
                                             <option value="08">08:00</option>
                                             <option value="09">09:00</option>
                                             <option value="10">10:00</option>
                                             <option value="11">11:00</option>
                                             <option value="12">12:00</option>                    
                                             </select>
                                             <input type="radio" name="amOpm" value="AM">AM
                                             <input type="radio" name="amOpm" value="PM">PM
		                                   </td>
		                              </tr>

		                         </tbody>
		                     </table>
		                     <table align="left">
		                         <tbody>
		                              <tr>
		                     		     <td style="padding:15px">
		                                   {{ Form::label('archivo', 'Archivo adjunto:') }}
		                                   </td>
		                                   <td style="padding:15px">
		                                   {{ Form::file('archivo') }}
		                                   </td>
		                              </tr>
		                              
		                              <tr>
		                              <td>		                              
	<div name="botonNuevaTarea">	                                   
<a class="btn btn-default btn-lg" onclick="if(!confirm('Desea crear una nueva tarea')){return false;}else{return nuevaTarea();};"><span class="glyphicon glyphicon-arrow-down">Nueva Tarea</span></a>	
</div>	                                   
		                                   </td>
		                                   <td>
<button type="submit" style="position:relative;left:385px" class="btn btn-default btn-lg" onclick="if(!confirm('Confirma la eliminacion de la tarea')){return false;};"><span class="glyphicon glyphicon-trash"> Eliminar</span></button>		                                   
		                                   </td>
		                              </tr>
		                         </tbody>
		                     </table>      				    
		                 </div>

		                 <div id="nuevaTarea2">

		                 </div>
		                 
		                 <br><br>
		                 
		     {{ Form::submit('Crear', array('class' => 'btn btn-default btn-lg')) }}
               {{ Form::close() }}
		                 
		                 
               </div>
      

          </div><!-- /#wrapper -->

    
        <!-- JavaScript -->
    <script src="/js/jquery-1.10.2.js"></script>
    <script src="/js/bootstrap.js"></script> 
   
<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<script>
$(function() {
$( "#datepicker" ).datepicker();
});
</script>


    <!-- Page Specific Plugins -->
    <script src="/js/morris/chart-data-morris.js"></script>
    <script src="/js/tablesorter/jquery.tablesorter.js"></script>
    <script src="/js/tablesorter/tables.js"></script>
    <script src="/js/javaScript.js"></script>  

  </body>
</html>
@else
{{	header("Location: /");
	exit();
	}}
@endif
@endif



            function nuevaTarea() {
            var forma=formaOriginal;
               var coleccion = forma.getElementsByTagName("td");
               for(i=0;i<coleccion.length;i++){
                    var hijos = coleccion[i].childNodes;
                    for(j=0;j<hijos.length;j++){
                         if(hijos[j].id=="divContenedor"){
                              var hijosDiv = hijos[j].childNodes;
                              for(k=0;k<hijosDiv.length;k++){
                                 document.getElementById("prueba").innerHTML += hijosDiv[k].name + "\n";
                              }
                         }else{
                          document.getElementById("prueba").innerHTML += hijos[j].name + "\n";
                          }
               }
               }
               
            }
            
            Hey guys I have the following problem, I hope you can help me.

I have a form with a radio boxes when I click in one of those I make with ajax input checkboxes for the same form, but when I submit the form I get null values for that checkboxes generated.

Here are my html code:

		                                     <td>
               <div>
               @foreach($roles as $key => value)	                                       
                    <input type="radio" name="rol" value="{{ $value->id }}" onClick="getUsuarios()"> {{ $value->nombre }}<br>
               @endforeach
               </div>
                                             </td>
                                             <td >
                <div id="usuarios" name="usuarios">

                </div>
		                                   </td>


Here my javaScript code:

    function getUsuarios(){
	var roles = document.getElementsByName("rol");
	     for(i=0;i<roles.length;i++){
               if(roles[i].checked) {
                    var rol=roles[i];
               }
          }
          


	req = new XMLHttpRequest();
	req.onreadystatechange=llenar;
	req.open("GET", "/procesos/usuariosRoles?rol="+rol.value, true);
	req.send(null);

    }

    function llenar(){
	if(req.readyState==4)
	document.getElementById("usuarios").innerHTML = req.responseText;
     }


And the code that generates the checkboxes after consulting the database

          foreach($usuarios as $usuario){
	          $salida .= "<input type='checkbox' name='usuariosTarea[]' value='".$usuario->email."'>"." ".$usuario->name." ".$usuario->plast_name."</input><br>";
	     }
          echo $salida;
